FROM python:3.12-slim

# Install required packages
RUN apt-get update && \
    apt-get install -y \
    build-essential \
    wget \
    git \
    && rm -rf /var/lib/apt/lists/*

# Clone the pyodide repository
RUN git clone https://github.com/pyodide/pyodide.git /src/pyodide
 
WORKDIR /src/pyodide

# Install pyodide-build
RUN pip install -e ./pyodide-build

# Build Python and Emscripten
RUN make -C emsdk && make -C cpython
